/*************************************************************************
	> File Name: DIR.c
	> Author: 
	> Mail: 
	> Created Time: 2017年09月08日 星期五 20时38分08秒
 ************************************************************************/

#include<stdio.h>
#include<stdlib.h>
#include<unistd.h>
#include<dirent.h>
void mytree(char *name)
{
    DIR *dir = opendir("./name");
    if(dir == NULL)perror("opendir"),exit(-1);
    while(1)
    {
        struct dirent *ent = readdir(dir);
        if(ent ==NULL)
        break;
        printf("type = %d\tname = %s\n",ent->d_type,ent->d_name);
    }
    
}
int main()
{
    DIR *dir = opendir("../Chat");
    if(dir == NULL)perror("opendir"),exit(-1);
    while(1)
    {
        struct dirent *ent = readdir(dir);
        if(ent ==NULL)
        break;
        printf("type = %d\tname = %s\n",ent->d_type,ent->d_name);
        if(ent->d_type == 4)
        {
            char *p;
            p=getcwd(NULL,128);
           printf("current path:%s\n",p);
            //char *name = get_current_dir_name();
            mytree(p);
            free(p);
        }

    }
}
